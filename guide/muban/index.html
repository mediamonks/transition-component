<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting started | Transition Component</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="A tool to add GSAP transitions to your components">
    
    <link rel="preload" href="/transition-component/assets/css/0.styles.e4a21285.css" as="style"><link rel="preload" href="/transition-component/assets/js/app.6292ac89.js" as="script"><link rel="preload" href="/transition-component/assets/js/2.c71ad1fb.js" as="script"><link rel="preload" href="/transition-component/assets/js/6.3bb19107.js" as="script"><link rel="preload" href="/transition-component/assets/js/5.27785fb1.js" as="script"><link rel="prefetch" href="/transition-component/assets/js/10.11a50a8d.js"><link rel="prefetch" href="/transition-component/assets/js/11.3966823f.js"><link rel="prefetch" href="/transition-component/assets/js/3.c0deb38b.js"><link rel="prefetch" href="/transition-component/assets/js/4.1ffe3afd.js"><link rel="prefetch" href="/transition-component/assets/js/7.d9f03118.js"><link rel="prefetch" href="/transition-component/assets/js/8.35029966.js"><link rel="prefetch" href="/transition-component/assets/js/9.79e8a423.js">
    <link rel="stylesheet" href="/transition-component/assets/css/0.styles.e4a21285.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/transition-component/" class="home-link router-link-active"><!----> <span class="site-name">Transition Component</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/transition-component/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/transition-component/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/mediamonks/transition-component" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/transition-component/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/transition-component/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/mediamonks/transition-component" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/transition-component/guide/" class="sidebar-heading clickable router-link-active open"><span>Guide</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/transition-component/guide/muban/" aria-current="page" class="active sidebar-link">Muban</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#installing" class="sidebar-link">Installing</a></li><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#add-to-your-project" class="sidebar-link">Add to your project</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#basic-implementation" class="sidebar-link">Basic implementation</a></li><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#storybook-implementation" class="sidebar-link">Storybook implementation</a></li><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#page-transition-implementation" class="sidebar-link">Page transition implementation</a></li></ul></li><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#component-transitions" class="sidebar-link">Component transitions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#usetransitioncontroller" class="sidebar-link">useTransitionController</a></li><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#usepagetransition" class="sidebar-link">usePageTransition</a></li><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#usescrolltransition" class="sidebar-link">useScrollTransition</a></li><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#triggering-transitions" class="sidebar-link">Triggering transitions</a></li><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#resetting-timelines" class="sidebar-link">Resetting timelines</a></li><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#events" class="sidebar-link">Events</a></li></ul></li><li class="sidebar-sub-header"><a href="/transition-component/guide/muban/#muban-storybook" class="sidebar-link">Muban Storybook</a></li></ul></li><li><a href="/transition-component/guide/vue/" class="sidebar-link">Vue</a></li><li><a href="/transition-component/guide/react/" class="sidebar-link">React</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting started</h1> <h2 id="installing"><a href="#installing" class="header-anchor">#</a> Installing</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This module only works for <strong><a href="https://github.com/mubanjs/muban" target="_blank" rel="noopener noreferrer">Muban 2.x<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p></div> <p>Add <code>muban-transition-component</code> to your project:</p> <!----> <h2 id="add-to-your-project"><a href="#add-to-your-project" class="header-anchor">#</a> Add to your project</h2> <p>Before you can start using the GreenSock transitions in your project you will first need to provide a <code>TransitionContext</code> for all child components.</p> <h3 id="basic-implementation"><a href="#basic-implementation" class="header-anchor">#</a> Basic implementation</h3> <p>This can be achieved by adding it to your <code>App</code> component through the <code>useGlobalTransitionContext</code> hook.</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGlobalTransitionContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">useGlobalTransitionContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="storybook-implementation"><a href="#storybook-implementation" class="header-anchor">#</a> Storybook implementation</h3> <p>Since Muban Storybook doesn't use the <code>App</code> you will have to also make sure the <code>TransitionContext</code> is available
there. Storybook has support for decorators that can be wrapped around your stories and this is exactly what we are
going to do.</p> <p>Update the <code>.storybook/preview.js</code> file to include the following decorator logic:</p> <div class="language-ts {2-4,6    -19} line-numbers-mode"><pre class="language-ts"><code><span class="token operator">...</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useGlobalTransitionContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createDecoratorComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/storybook'</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> decorators <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token function">createDecoratorComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> component <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      component<span class="token operator">:</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'global-context'</span><span class="token punctuation">,</span>
        components<span class="token operator">:</span> <span class="token punctuation">[</span>component<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">useGlobalTransitionContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="page-transition-implementation"><a href="#page-transition-implementation" class="header-anchor">#</a> Page transition implementation</h3> <p>To enable page transitions you can use add the <code>usePageTransitions</code> hook to your <code>App</code> component.</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> usePageTransitioning <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">usePageTransitioning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>This hook is an extension on the <code>useGlobalTransitionContext</code> hook described in the previous section.</p></blockquote> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>The automated <code>transitionOut</code> logic is still a todo!</p></div> <h2 id="component-transitions"><a href="#component-transitions" class="header-anchor">#</a> Component transitions</h2> <p>You can now create transition components by using one of the following hooks:</p> <ul><li><code>useTransitionController</code></li> <li><code>usePageTransition</code></li> <li><code>useScrollTransition</code></li></ul> <h3 id="usetransitioncontroller"><a href="#usetransitioncontroller" class="header-anchor">#</a> <code>useTransitionController</code></h3> <p>This hook can be used when you want to create a component that either requires a manual transition trigger or if it
will be added to a parent timeline.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransitionController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'some-component'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refs <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The first argument is the ref that is used to reference the transition-controller. Usually you would provide the </span>
    <span class="token comment">// `self` ref but you could technically provide any ref you want.</span>
    <span class="token function">useTransitionController</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>self<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// Whether or not you want to be able to access your controller from </span>
      <span class="token comment">// the transition-context, defaults to `true`. If this is set to `false` you cannot nest  </span>
      <span class="token comment">// this timeline inside another timeline.</span>
      registerTransitionController<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
      refs<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// Any refs that will be forwarded to the `setupTransitionInTimeline` and </span>
        <span class="token comment">// `setupTransitionOutTimeline` functions</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// `timeline` - This is the GreenSock timeline where the animations will be added.</span>
      <span class="token comment">// `elements` - This is an object that holds all of the unwrapped refs (`HTMLElement|Array&lt;HTMLElement&gt;`) that are provided in the refs object.</span>
      <span class="token comment">// `transitionContext` - This context can be used to reference other timelines and nest them in your timeline.    </span>
      <span class="token function-variable function">setupTransitionInTimeline</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Add your in timeline here.</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">setupTransitionOutTimeline</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Add your out timeline here. </span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>   
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
      
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>Take a look at this working example on CodePen</p> <iframe src="https://codesandbox.io/embed/controlling-the-transition-controller-tbv4g?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="Controlling the transition-controller" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h4 id="nesting-a-timeline"><a href="#nesting-a-timeline" class="header-anchor">#</a> Nesting a timeline</h4> <p>Nesting timelines can be achieved through the <code>transitionContext</code>.</p> <p>You simply call the <code>getTimeline</code> method with a ref that references the HTMLElement that was used to create the transitionController.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Make sure the target component has the <code>registerTransitionController</code> flag set to <code>true</code> to ensure it's added to the <code>transitionContext</code>.</p></div> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token operator">...</span>
<span class="token function-variable function">setupTransitionInTimeline</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> <span class="token punctuation">{</span> someRef <span class="token punctuation">}</span><span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token comment">// Timelines can referenced through the `transitionContext`, use a `ref` or </span>
  <span class="token comment">// `HTMLElement` to find the timeline on the context. </span>
  timeline<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>transitionContext<span class="token punctuation">.</span><span class="token function">getTimeline</span><span class="token punctuation">(</span>someRef<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Take a look at this working example on CodePen</p> <iframe src="https://codesandbox.io/embed/nesting-a-timeline-within-another-timeline-bt78t?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="Nesting a timeline within another timeline" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h4 id="separating-your-transition-logic"><a href="#separating-your-transition-logic" class="header-anchor">#</a> Separating your transition logic</h4> <p>When your timelines becomes more complex and grows in size you might want to consider moving your setup functions to a separate file (for example: <code>myComponent.transitions.ts</code>).</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// SomeComponent.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> refElement<span class="token punctuation">,</span> refElements <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransitionController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> setupTransitionInTimeline <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./SomeComponent.transitions.ts'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'some-component'</span><span class="token punctuation">,</span>
  refs<span class="token operator">:</span> <span class="token punctuation">{</span>
    someRefElement<span class="token operator">:</span> <span class="token function">refElement</span><span class="token punctuation">(</span><span class="token string">'some-ref-element'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    someRefCollection<span class="token operator">:</span> <span class="token function">refElements</span><span class="token punctuation">(</span><span class="token string">'some-ref-collection'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refs <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">useTransitionController</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>self<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// Here we provide the refs that we want to use in your transition.</span>
      refs<span class="token operator">:</span> <span class="token punctuation">{</span>
        someRefElement<span class="token operator">:</span> refs<span class="token punctuation">.</span>someRefElement<span class="token punctuation">,</span>
        someRefCollection<span class="token operator">:</span> refs<span class="token punctuation">.</span>someRefCollection
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// Note that we now pass a function that does the setup instead of doing it inline.</span>
      setupTransitionInTimeline<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
      
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// SomeComponent.transitions..ts</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span>
  SetupTransitionSignature<span class="token punctuation">,</span>
  TransitionRefElement<span class="token punctuation">,</span>
  TransitionRefCollection<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>

<span class="token comment">// Define the type of refs you are providing, this way we can automatically type the elements returned</span>
<span class="token keyword">type</span> <span class="token class-name">TransitionRefs</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  someRefElement<span class="token operator">:</span> TransitionRefElement<span class="token punctuation">,</span>
  someRefCollection<span class="token operator">:</span> TransitionRefCollection<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> setupTransitionInTimeline<span class="token operator">:</span> SetupTransitionSignature<span class="token operator">&lt;</span>TransitionRefs<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  timeline<span class="token punctuation">,</span> <span class="token punctuation">{</span> someRefElement<span class="token punctuation">,</span> someRefCollection <span class="token punctuation">}</span><span class="token punctuation">,</span> transitionContext
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// `someRefElement` is automatically converted to an `HTMLElement | undefined`.</span>
  <span class="token comment">// `someRefCollection` is automatically converted to an `Array&lt;HTMLElement&gt;`.</span>
  
  <span class="token comment">// Add whatever transition you would want here</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="defining-your-transitionrefs"><a href="#defining-your-transitionrefs" class="header-anchor">#</a> Defining your TransitionRefs</h4> <p>As you might have noticed we type the <code>Refs</code> that are added to the hook configuration, it's important to do this to ensure we get the correct typings in your setup function.</p> <p>These types can be grouped into the following two categories:</p> <ul><li><code>TransitionRefElement</code></li> <li><code>TransitionRefCollection</code></li></ul> <h5 id="transitionrefelement"><a href="#transitionrefelement" class="header-anchor">#</a> TransitionRefElement</h5> <p>This group holds all <code>refs</code> that are retrieved through one of the following ref definitions in Muban:</p> <ul><li><a href="https://mubanjs.github.io/muban/api/refs.html#refelement" target="_blank" rel="noopener noreferrer">refElement<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mubanjs.github.io/muban/api/refs.html#refcomponent" target="_blank" rel="noopener noreferrer">refComponent<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h5 id="transitionrefcollection"><a href="#transitionrefcollection" class="header-anchor">#</a> TransitionRefCollection</h5> <p>This group holds all <code>refs</code> that are retrieved through one of the following ref definitions in Muban:</p> <ul><li><a href="https://mubanjs.github.io/muban/api/refs.html#refcollection" target="_blank" rel="noopener noreferrer">refCollection<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mubanjs.github.io/muban/api/refs.html#refcomponents" target="_blank" rel="noopener noreferrer">refComponents<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="multiple-timelines"><a href="#multiple-timelines" class="header-anchor">#</a> Multiple timelines</h4> <p>In some cases you might want to create multiple timelines per component. This could be done
by proxying your <code>setupTransitionInTimeline</code> method and resetting the timeline when needed.</p> <blockquote><p><strong>Note:</strong> There are probably multiple ways of doing this, so please refer to this as just an example!</p></blockquote> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// SomeComponent.ts</span>
<span class="token operator">...</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getTimeline <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./SomeComponent.transitions.ts'</span><span class="token punctuation">;</span>
<span class="token operator">...</span>

<span class="token operator">...</span>
 <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refs <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> transitionController <span class="token operator">=</span> <span class="token function">useTransitionController</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>self<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">setupTransitionInTimeline</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
        <span class="token comment">// The `getTimeline` method is used to find the correct timeline. </span>
        <span class="token function">getTimeline</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">in</span><span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span><span class="token punctuation">,</span>        
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// In this example we watch some ref that might change due to a </span>
    <span class="token comment">// window resize or what ever you can think of.</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>someRef<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      transitionController<span class="token punctuation">.</span><span class="token function">resetTimeline</span><span class="token punctuation">(</span><span class="token string">'in'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// SomeComponent.transitions.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> 
  TransitionDirection<span class="token punctuation">,</span> 
  SetupTransitionSignature 
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">SetupTimeline</span> <span class="token operator">=</span> Record<span class="token operator">&lt;</span>TransitionDirection<span class="token punctuation">,</span> SetupTransitionSignature<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> setupTimeline<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token string">'default'</span> <span class="token operator">|</span> <span class="token string">'other'</span><span class="token punctuation">,</span> SetupTimeline<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">in</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Some in animation.      </span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">out</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Some out animation.      </span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  other<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">in</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Some other in animation.      </span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">out</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Some other out animation.      </span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// This method will be called when the setup method is called, so make sure </span>
<span class="token comment">// to return the correct timeline for the correct condition.</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getTimeline</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span>SomeComponentProps<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  
  <span class="token comment">// Define what condition returns what timeline. </span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>somePropValue <span class="token operator">===</span> <span class="token string">'other'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> setupTimeline<span class="token punctuation">.</span>other<span class="token punctuation">;</span>

  <span class="token keyword">return</span> setupTimeline<span class="token punctuation">.</span><span class="token keyword">default</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="usepagetransition"><a href="#usepagetransition" class="header-anchor">#</a> <code>usePageTransition</code></h3> <p>This hook can be used when you want to create a page transition, it will automatically trigger the <code>transitionIn</code> when
the component has been mounted.</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> usePageTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'some-page-component'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">usePageTransition</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>self<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// Add your transition configuration. </span>
      <span class="token comment">// It supports the same as the `useTransitionController` hook.</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
      
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="usescrolltransition"><a href="#usescrolltransition" class="header-anchor">#</a> <code>useScrollTransition</code></h3> <p>This hook can be used when you want to attach a timeline GreenSock's ScrollTrigger functionality. It basically has the same configuration options as the <code>useTransitionController</code> does with two major differences:</p> <ol><li>The addition of the <code>scrollTrigger</code> key, which has all the same options as <a href="https://greensock.com/docs/v3/Plugins/ScrollTrigger" target="_blank" rel="noopener noreferrer">ScrollTrigger<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>The default value for the <code>registerTransitionController</code> is set to <code>false</code>.</li></ol> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useScrollTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'some-page-component'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">useScrollTransition</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>self<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// Add your transition configuration. </span>
      <span class="token comment">// It supports the same as the `useTransitionController` hook.</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
      
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>When using this hook there will be no Promise returned by the <code>transitionIn</code> / <code>transitionOut</code> methods, you can still use the regular event callbacks in the setupOptions though.</p></div> <p>Take a look at this working example on CodePen
<iframe src="https://codesandbox.io/embed/using-scrolltrigger-to-trigger-transitions-qewqv?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="Using ScrollTrigger to trigger transitions" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe></p> <h4 id="global-scrolltrigger-variables"><a href="#global-scrolltrigger-variables" class="header-anchor">#</a> Global ScrollTrigger variables</h4> <p>In some scenarios you might want to set some ScrollTrigger variables for all components that are children of a certain component.</p> <p>An example scenario might be a lightbox like component with it's own scrollbar that is displayed on top of your main application. In this scenario you will need to define a <a href="https://greensock.com/docs/v3/Plugins/ScrollTrigger/scroller" target="_blank" rel="noopener noreferrer">scroller<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to ensure that <code>gsap</code> uses the correct scrollbar for triggering the transitions.</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> refElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> provideScrollContext<span class="token punctuation">,</span> ScrollContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> SomeParentComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'some-parent-component'</span><span class="token punctuation">,</span>
  refs<span class="token operator">:</span> <span class="token punctuation">{</span>
    content<span class="token operator">:</span> <span class="token function">refElement</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refs <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Provide the context to set the global properties.</span>
    <span class="token function">provideScrollContext</span><span class="token punctuation">(</span>
      <span class="token comment">// You can set all of the properties that are supported by the ScrollTrigger plugin. </span>
      <span class="token keyword">new</span> <span class="token class-name">ScrollContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        scroller<span class="token operator">:</span> refs<span class="token punctuation">.</span>content<span class="token punctuation">.</span>element<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The child still has the final say on what will be executed. So if you provide the same properties to the configuration of your child's <code>useScrollTransition</code> hook, they will overwrite the global ones.</p></div> <h3 id="triggering-transitions"><a href="#triggering-transitions" class="header-anchor">#</a> Triggering transitions</h3> <p>Transitions can be triggered through the transition controller that is returned by the <code>useTransitionComponent</code> hook.</p> <h4 id="transition-in-timeline"><a href="#transition-in-timeline" class="header-anchor">#</a> Transition in timeline</h4> <p>Transition in can be triggered by calling <code>transitionIn</code> on the transition controller</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransitionController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'some-component'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// You can use the returned transition controller to manually trigger </span>
    <span class="token comment">// `transitionIn` or `transitionOut`</span>
    <span class="token keyword">const</span> transitionController <span class="token operator">=</span> <span class="token function">useTransitionController</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>self<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">setupTransitionInTimeline</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timeline<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>elements<span class="token punctuation">.</span>container<span class="token punctuation">,</span> <span class="token punctuation">{</span> autoAlpha<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token comment">// Trigger the transition in once the component has been mounted</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> transitionController<span class="token punctuation">.</span><span class="token function">transitionIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="transition-out-timeline"><a href="#transition-out-timeline" class="header-anchor">#</a> Transition out timeline</h4> <p>This triggering this is very similar to triggering the transition out, so please refer to that documentation.</p> <h4 id="looping-timelines"><a href="#looping-timelines" class="header-anchor">#</a> Looping timelines</h4> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>Looping timelines are still a todo!</p></div> <h3 id="resetting-timelines"><a href="#resetting-timelines" class="header-anchor">#</a> Resetting timelines</h3> <p>In some scenarios you might want to reset a timeline, for example you want to use a different timeline on a certain breakpoint.</p> <p>This can be easily achieved by calling the <code>resetTimeline</code> method and providing the desired direction.</p> <p><strong>Supported directions</strong></p> <ul><li><code>in</code></li> <li><code>out</code></li></ul> <p><strong>Reset the in-transition</strong></p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransitionController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'some-component'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> transitionController <span class="token operator">=</span> <span class="token function">useTransitionController</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>self<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">setupTransitionInTimeline</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timeline<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>elements<span class="token punctuation">.</span>container<span class="token punctuation">,</span> <span class="token punctuation">{</span> autoAlpha<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Calling the reset method will re-initialize the timeline</span>
    transitionController<span class="token punctuation">.</span><span class="token function">resetTimeline</span><span class="token punctuation">(</span><span class="token string">'in'</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="events"><a href="#events" class="header-anchor">#</a> Events</h3> <p>There are multiple ways to listen to the transition events.</p> <ul><li>Hook callbacks</li> <li>Transition method callbacks</li> <li>Transition method promise</li></ul> <h4 id="hook-callbacks"><a href="#hook-callbacks" class="header-anchor">#</a> Hook callbacks</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransitionController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'some-component'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> transitionController <span class="token operator">=</span> <span class="token function">useTransitionController</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>self<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">setupTransitionInTimeline</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timeline<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>elements<span class="token punctuation">.</span>container<span class="token punctuation">,</span> <span class="token punctuation">{</span> autoAlpha<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onStart</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Triggered when a timeline starts, either `transitionIn` or `transitionOut`</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onComplete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Triggered when a timeline is completed, either `transitionIn` or `transitionOut`</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="transition-method-callbacks"><a href="#transition-method-callbacks" class="header-anchor">#</a> Transition method callbacks</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransitionController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'some-component'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> transitionController <span class="token operator">=</span> <span class="token function">useTransitionController</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>self<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">setupTransitionInTimeline</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timeline<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>elements<span class="token punctuation">.</span>container<span class="token punctuation">,</span> <span class="token punctuation">{</span> autoAlpha<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>     
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// This also works for `transitionOut`</span>
      transitionController<span class="token punctuation">.</span><span class="token function">transitionIn</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">onStart</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// Triggered when a timeline starts!</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onComplete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// Triggered when a timeline is completed!</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>    
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="transition-method-promises"><a href="#transition-method-promises" class="header-anchor">#</a> Transition method promises</h4> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muban/muban'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransitionController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mediamonks/muban-transition-component'</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'some-component'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> transitionController <span class="token operator">=</span> <span class="token function">useTransitionController</span><span class="token punctuation">(</span>refs<span class="token punctuation">.</span>self<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">setupTransitionInTimeline</span><span class="token operator">:</span> <span class="token punctuation">(</span>timeline<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> transitionContext<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timeline<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>elements<span class="token punctuation">.</span>container<span class="token punctuation">,</span> <span class="token punctuation">{</span> autoAlpha<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>     
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// This also works for `transitionOut`</span>
      <span class="token keyword">await</span> transitionController<span class="token punctuation">.</span><span class="token function">transitionIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token comment">// Triggered when a timeline is completed.</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="muban-storybook"><a href="#muban-storybook" class="header-anchor">#</a> Muban Storybook</h2> <p>You might not want to trigger transitions when you open up a component in Storybook, but you might still
want to be able to preview/test them.</p> <p>This can be done by installing <code>muban-storybook-addon-transition</code> in your project.</p> <!----> <p>After installing the package you can add it to the <code>main.ts</code> file in the <code>.storybook</code> directory.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  stories<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  addons<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@mediamonks/muban-storybook-addon-transition&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>To make sure the addon can find the timelines you'll have to expose the <code>TransitionContext</code> on the <code>Window</code>. This can
be done by updating the <code>.storybook/preview.js</code> file and make sure we store the return value.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token operator">...</span>
window<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>window<span class="token punctuation">.</span>transitionContext <span class="token operator">=</span> <span class="token function">useGlobalTransitionContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>After adding the addon you will now have a &quot;Transitions&quot; tab in Storybook that can be used to control the
timeline for the current active component.</p> <p><img src="/transition-component/assets/img/muban-storybook-addon-transition-screenshot.4a7392ec.png" alt="Screenshot of the Storybook addons"></p> <p>If the current component does not have a registered timeline it will show the following message:</p> <p><img src="/transition-component/assets/img/muban-storybook-addon-transition-screenshot-no-timeline.05792885.png" alt="Screenshot of the Storybook addons without a timeline"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/transition-component/guide/vue/">
        Vue
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/transition-component/assets/js/app.6292ac89.js" defer></script><script src="/transition-component/assets/js/2.c71ad1fb.js" defer></script><script src="/transition-component/assets/js/6.3bb19107.js" defer></script><script src="/transition-component/assets/js/5.27785fb1.js" defer></script>
  </body>
</html>
